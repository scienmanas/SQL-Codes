1. CRUD :
Create, Read, Update, Delete

2. Columns: structure, schema of database

3. Rows: Individual data

4. Creating Tables :

USE db_name;
CREATE TABLE table_name (
    column1_name datatype contraint,
    column2_name datatype contraint,
    column3_name datatype contraint,
   ....
);

5. Datatypes:

CHAR(50)      -> string(0-255)
VARCHAR(50)   -> string(0-255)
BLOB(1000)    -> string(0-65535) (can be used to store images and vidoes)
INT           -> integer(-2,147,483,648 to 2,147,483,647)
TINYINT       -> integer(-128 to 127)
BIGINT        -> integer(-9,223,372,036,854,775,808 to 9,223,372,036,775,807)
BIT(2)        -> can store x-bit values. x can range from 1 to 64
FLOAT         -> precision: 23
DOUBLE        -> precision: 24-53
BOOLEAN       -> Boolean values 0 or 1 (Not directly used in sql use tinyint)
DATE          -> format: YYYY-MM-DD ranging 1000-01-01 to 9999-12-31
YEAR          -> four digit format ranging from 1901 to 2155

6. Signed (Both Postive and negaive values) and Unsigned (only one type of values all space goes to particular type of number)

7. Types of Sql commands

DDL (Data Definition Language): create, alter, rename, truncate & drop
DQL (Data query language): select
DML (Data manipulation Language): insert, update & delete
DCL (Data control language): grant & revoke permission to users
TCL (Transition control Language): start transaction, commit, rollback

8. Databases related query

CREATE DATABASE db_name;
CREATE DATABASE IF NOT EXISTS db_name;

DROP DATABASE db_name;
DROP DATABASE IF EXISTS db_name;

SHOW DATABASE;
SHOW TABLES;

9. Tables related query

CREATE TABLE table_name (                     (give schema)
    column1_name datatype contraint,
    column2_name datatype contraint,
    column3_name datatype contraint,
   ....
);

10. Primary key is always not null

11. DROP TABLE student;

12. Insert into table

INSERT INTO table_name
(column1_name, column2_name)
VALUES
(col1_value1,col2_value1),
(col1_value2,col2_value2);

13. Keys in Databases

a) Primary Key: It is a column (or a set of columns) in a table that uniqely identifies each row. (a unique id). There is only 1 PK & it should be not null.

b) Foreign Key: A Foreign key is a column (or a set of columns) in a table that refers to the Primary key of another table. There can be multiple FKs. FKs can have duplicate and null values. 
e.g: When it is nullable, consider exampl of a book where we don't want it to be related to a author, i.e. the author is anonymous.

14. Images/Videos can be stored in BLOB data type,
CREATE TABLE image_storage (
    image_id INT PRIMARY KEY,
    image_data BLOB
);

INSERT INTO image_storage (image_id, image_data)
VALUES (1, LOAD_FILE('/path/to/your/image.jpg'));


15. Contarints:

NOT NULL: cannot have null value
UNIQUE: all values in the column are different
PRIMARY KEY: makes column unique and not null
FOREIGN KEY: prevent actions that would destroy links between tables.
DEFAULT: sets the default value
CHECK: it can limit the values allowed in a column

CREATE TABLE emp (
    id INT ,
    salary INT DEFAULT 25000
);


16. CREATE TABLE temp1 (
    id INT,
    name VARCHAR(50),
    city VARCHAR(20),
    PRIMARY KEY (id, name)
);

// Their combination will be null and unique

17. CREATE TABLE temp (
    cust_id INT,
    FOREIGN KEY (cust_id) REFERENCES customer(id)
);
Customer is table and id is paramter

18. CREATE TABLE city (
    id INT PRIMARY KEY,
    city VARCHAR(50),
    age INT,
    CONTRAINT age_check CHECK (age >= 18 AND city="Delhi")
);

CREATE TABLE newTab (
    age INT CHECK (age >= 18)
);

19. SELECT col1, col2, ... FROM <table>;
DISTICT keyword used to get distict data

20. Clauses: condition should be fullfilled 

a) WHERE clause: To define some conditions

SELECT * FROM student WHERE marks > 80;


21. Operators: Using Operators in WHERE

Arithmetic: +, -, *, /, % 
Comparison: =, !=, >, >=, <, <=
Logical: AND, OR, NOT, IN, BETWEEN, ALL, LIKE, ANY
Bitwise: & (Bitwise AND), | (Bitwise OR)

SELECT * FROM student WHERE marks > 80 AND marks < 90;
SELECT * FROM student WHERE marks > 80 OR marks < 90;
SELECT * FROM student WHERE NOT marks > 80;
SELECT * FROM student WHERE city IN ("Delhi", "Mumbai", "Gurgaon"); // Can write cities which are not in database
SELECT * FROM student WHERE marks BETWEEN 80 AND 90;
SELECT * FROM student WHERE marks LIKE '8%';
SELECT * FROM student WHERE marks LIKE '8_'; // _ is a single character wildcard
 
b) LIMIT 

SELECT * FROM student LIMIT 2; // Only 2 rows will be shown

c) ORDER BY

SELECT * FROM student ORDER BY marks ASC; // Ascending order
SELECT * FROM student ORDER BY marks DESC; // Descending order

d) GROUP BY: group rows that have the same value into summary rows. It collects data from multiple reocrds and groups the result by one or more column.

GROUP BY is used with aggregate functions like COUNT(), MAX() etc.

SELECT city, COUNT(*) FROM student GROUP BY city; // Group by city and count the number of students in each city

e) HAVING: similar to where, applies some condition on rows. Used when we want to apply any condition after grouping. 

HAVING is used with aggregate functions to filter the results.
SELECT country, AVG(marks) AS avgMarks FROM student GROUP BY country HAVING AVG(marks) > 7

f) JOIN
JOIN is used to combine rows from two or more tables based on a related column between them.
SELECT * FROM student JOIN city ON student.city = city.city_name;
i) INNER JOIN: Returns records that have matching values in both tables
ii) LEFT JOIN: Returns all records from the left table, and the matched records from the right table
iii) RIGHT JOIN: Returns all records from the right table, and the matched records from the left table
iv) FULL JOIN: Returns all records when there is a match in either left or right table
v) CROSS JOIN: It returns the Cartesian product of two tables i.e., it combines each row of the first table with
each row of the second table.

32. Subqueries

SELECT * FROM student WHERE marks > (SELECT AVG(marks) FROM student);
Subquery can also be written as an IN clause:
SELECT * FROM student WHERE marks > ALL (SELECT AVG(marks) FROM student);
The EXISTS keyword returns TRUE if at least one record matches the subquery condition. It's often used for checking existence of data.
SELECT * FROM student WHERE EXISTS (SELECT * FROM city WHERE student.city = city.city_name);

33. Aggregate Functions: perform a calculation on a set of values, and return a single value

a) COUNT ()
b) MAX ()
c) MIN ()
d) SUM ()
e) AVG ()

34. String Functions

LENGTH(): returns the length of string
CONCAT(): concatenates two or more strings
SUBSTRING(): extracts a substring from a string
REPLACE(): replaces all occurrences of a substring within a string, with a new substring
REVERSE(): reverses a string and returns the result
UPPER(): converts a string to upper-case
LOWER(): converts a string to lower-case
TRIM(): removes all spaces from both sides of a string
LTRIM(): removes all spaces from the left side of a string
RTRIM(): removes all spaces from the right side of a string
CHARINDEX(): finds the position of one string inside another string

35. General Order

SELECT column(s)
FROM table_name
WHERE condition
GROUP columns(s)
HAVING condition
ORDER BY column(s) ASC;

36. Table related queries

a) UPDATE: to update existing rows

UPDATE table_name
SET col1 = val1, col2 = val2
WHERE condition

eg: 

UPDATE student 
SET grade = "O"
WHERE grade = "A";

b) DELETE: to delete existing rows

DELETE FROM table_name
WHERE condition

e.g.:
DELETE FROM student
WHERE marks < 20

37. Revisiting Foreign key

-- DELETE FROM student
-- All data will be deleted 

CREATE TABLE dept (
    id INt PRIMARY Key,
    name VARCHAR(50)
);    -> Parent table



CREATE TABLE teacher (
    id INT PRIMARY KEY,
    name VARCHAR(50),
    dept_id INT,
    FOREIGN KEY (dept_id) REFERENCES dept(id)
);   -> Child table

38. Cascading on Foreign key

ON DELETE CASCADE: When we create a Foreign key using this option, it deletes the referencing rows in the child table when the referecne row is deleted 